swagger: '2.0'
securityDefinitions:
  ApiKeyAuth:
    type: apiKey
    in: header
    name: X-Auth-APIKey
security:
  - ApiKeyAuth: []
info:
  description: >-
    This API allows users to create contact lists, suppression
    lists, and broadcasts, send them and query the results.


    Contacts can be tagged or untagged on demand with the **/lists/{id}/feed** endpoint.
    

    To send transactional mail, use the **/transactional/send** endpoint.
    

    All API methods use /api/ as the base URL. All methods are
    REST-style and return output as JSON. If JSON is sent in the request body as input, the
    Content-Type header must be set to application/json.


    All requests must be authorized with an API key. You can find your API key on the *Integrate* menu,
    under *API & SMTP*. To authorize requests, add an "X-Auth-APIKey" HTTP header to the request,
    with the header value being your key.


    All methods return an HTTP code of 200 for a successful call, and a standard HTTP
    error code (e.g. 401) for an unsuccessful call. The body of the unsuccessful call will
    contain more information about the error.


    Click an API method group below for more information about each method.
  version: 1.0.0
  title: API
host:
basePath: /api
tags:
  - name: lists
    description: Contact Lists
  - name: supplists
    description: Suppression Lists
  - name: exclusion
    description: Exclusion Lists
  - name: broadcasts
    description: Broadcasts
  - name: exports
    description: Exported Files
  - name: transactional
    description: Transactional
  - name: webhooks
    description: Webhooks
schemes:
  - https
paths:
  /lists:
    post:
      tags:
        - lists
      summary: Create a new contact list
      description: 'Creates a contact list from the properties in the submitted JSON object. At present the only property which can be set is the list name. List data is added via the /lists/{id}/add method.'
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: Contact list object. This does not contain the list data itself.
          required: true
          schema:
            $ref: '#/definitions/list_postpatch'
      responses:
        '201':
          description: Success
          schema:
            $ref: '#/definitions/list'
        '400':
          description: Invalid input document
        '401':
          description: Unauthorized
    get:
      tags:
        - lists
      summary: Retrieve all contact lists
      parameters: []
      description: 'Returns an array of JSON objects which contain information about the contact lists in the system: the name of each list, the number of contacts, the number of domains, and the number of active contacts over the past 30, 60 and 90 days.'
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/list_all'
  '/lists/{id}':
    get:
      tags:
        - lists
      summary: Retrieve a contact list
      parameters:
        - in: path
          name: id
          description: List ID
          required: true
          type: string
      description: 'Returns a JSON object which contain information about the contact list specified: the name, the number of contacts, and the number of active contacts over the past 30, 60 and 90 days.'
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/list'
    patch:
      tags:
        - lists
      summary: Update a contact list
      parameters:
        - in: body
          name: body
          description: Updates a contact list object based on the properties in the submitted JSON. At present the only property which can be updated is the list name.
          required: true
          schema:
            $ref: '#/definitions/list_postpatch'
        - in: path
          name: id
          description: List ID
          required: true
          type: string
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
    delete:
      tags:
        - lists
      summary: Delete a contact list
      description: Deletes a contact list. Any contacts not present in other lists will also be deleted.
      parameters:
        - in: path
          name: id
          description: List ID
          required: true
          type: string
      responses:
        '200':
          description: Success
        '403':
          description: Forbidden/not found
  '/lists/{id}/export':
    post:
      tags:
        - lists
      summary: Export contact list data
      description: >-
        Creates an export object that points to a file URL which contains all the contact data for this list, and returns its ID.
        Note that the file will not exist yet when this method is called; to determine when the
        export has completed, use the returned export ID and poll it using the /exports resource.
      parameters:
        - in: path
          name: id
          description: List ID
          required: true
          type: string
      consumes: []
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: object
            properties:
              id:
                type: string
        '403':
          description: Forbidden/not found
  '/lists/{id}/add':
    post:
      tags:
        - lists
      summary: Add data to a contact list
      description: Adds the submitted CSV data to a list. If contacts already exist in the list, the new data overwrites the properties of the previous data. Note that the "/feed" method can also be used to quickly add a single contact to a list.
      parameters:
        - in: path
          name: id
          description: List ID
          required: true
          type: string
        - in: body
          name: body
          description: >-
            List data in CSV format. The first row of the data must consist of
            property names, (e.g. First Name), one of which must be "Email". The
            maximum data size is 25MB. To add more data than this to a list,
            call this method multiple times.
          required: true
          schema:
            type: string
            example: >-
              Email,First Name
              
              ted@domain.com,Ted
              
              judy@domain.com,Judy
            
      consumes:
        - text/csv
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
  '/lists/{id}/feed':
    post:
      tags:
        - lists
      summary: Add a single contact to a contact list
      description: Add a contact to a list. If contacts already exist in the list, the new data overwrites the properties of the previous data. Unlike the "/add" or "/addunsubs" methods, this method can be called multiple times simultaneously on the same list, and a user can be tagged immediately after they are added.
      parameters:
        - in: path
          name: id
          description: List ID
          required: true
          type: string
        - in: body
          name: body
          description: >-
            A JSON object which contains contact email, property data and tags. Use the **removetags** field to remove tags from a contact if they already exist. Use the **unsubscribe** flag to unsubscribe a contact, and the **resubscribe** flag to resubscribe a contact who has unsubscribed.
          required: true
          schema:
            type: object
            properties:
              email:
                type: string
                example: ted@domain.com
              tags:
                type: array
                items:
                  type: string
              removetags:
                type: array
                items:
                  type: string
              resubscribe:
                type: boolean
                example: false
              unsubscribe:
                type: boolean
                example: false
              data:
                type: object
                example:
                  First Name: Ted
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
  '/lists/{id}/domainstats':
    get:
      tags:
        - lists
      summary: Get the number of contacts in each domain in the list
      parameters:
        - in: path
          name: id
          description: List ID
          required: true
          type: string
      description: Returns an array of JSON objects, each of which contains a domain name and a count of contacts for that domain in the list.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: array
            items:
              type: object
              properties:
                domain:
                  type: string
                  example: domain.com
                count:
                  type: integer
                  example: 3000
  '/lists/{id}/deletedomains':
    post:
      tags:
        - lists
      summary: Remove contacts matching a set of domains
      description: Removes contacts which are members of the domains specified by the submitted JSON array.
      parameters:
        - in: path
          name: id
          description: List ID
          required: true
          type: string
        - in: body
          name: body
          description: A JSON array containing a list of domains to remove from the list.
          required: true
          schema:
            type: array
            items:
              type: string
              example: domain.com
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
  '/lists/{id}/deletecontacts':
    post:
      tags:
        - lists
      summary: Remove contacts by email addresses
      description: Removes contacts from a list which have the email addresses in the submitted JSON array. Returns the number of contacts removed, which may be smaller than the number of email addresses submitted if some of the addresses do not exist in the list.
      parameters:
        - in: path
          name: id
          description: List ID
          required: true
          type: string
        - in: body
          name: body
          description: A JSON array containing contact emails to remove from the list. Limited to 1,000 emails per call.
          required: true
          schema:
            type: array
            items:
              type: string
              example: contact@domain.com
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: object
            properties:
              count:
                type: integer
                example: 100
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
  '/lists/{id}/addunsubs':
    post:
      tags:
        - lists
      summary: Unsubscribe many contacts from a list
      description: Marks contacts as unsubscribed in a list. The data is submitted as a text string with one email address per line. If contacts do not exist in the list, they are added in an unsubscribed state (unsubscribed contacts are suppressed from all sends). Note that the "/feed" method can also be used to quickly unsubscribe a single contact.
      parameters:
        - in: path
          name: id
          description: List ID
          required: true
          type: string
        - in: body
          name: body
          description: >-
            Email addresses as plain text, with one address per line.
          required: true
          schema:
            type: string
            example: >-
              ted@domain.com
              
              judy@domain.com
            
      consumes:
        - text/plain
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
  '/contactdata/{email}':
    get:
      tags:
        - lists
      summary: Retrieve all data for a single contact
      parameters:
        - in: path
          name: email
          description: Contact email address
          required: true
          type: string
      description: Returns a JSON object containing the contact data for the specified email address.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/contactdata'
        '404':
          description: Contact not found
        '403':
          description: Forbidden
    delete:
      tags:
        - lists
      summary: Delete all data for a single contact
      parameters:
        - in: path
          name: email
          description: Contact email address
          required: true
          type: string
      description: Removes all known data for a contact in all lists.
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '403':
          description: Forbidden
  '/alltags':
    get:
      tags:
        - lists
      summary: Retrieve a list of all tags in the system
      description: Returns a JSON array of objects containing a tag name, the number of contacts with that tag, and the date the tag was added.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/alltags'
        '403':
          description: Forbidden
  /supplists:
    post:
      tags:
        - supplists
      summary: Create a new suppression list
      description: 'Creates a suppression list from the properties in the submitted JSON object. At present the only property which can be set is the list name. List data is added via the /supplists/{id}/add method.'
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: Suppression list object. This does not contain the list data itself.
          required: true
          schema:
            $ref: '#/definitions/supplist_postpatch'
      responses:
        '201':
          description: Success
          schema:
            $ref: '#/definitions/supplist'
        '400':
          description: Invalid input document
        '401':
          description: Unauthorized
    get:
      tags:
        - supplists
      summary: Retrieve all suppression lists
      parameters: []
      description: Returns a JSON array of objects containing the name and data count of each suppression list.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/supplist_all'
  '/supplists/{id}':
    get:
      tags:
        - supplists
      summary: Retrieve a suppression list
      parameters:
        - in: path
          name: id
          description: Suppression List ID
          required: true
          type: string
      description: Returns a JSON object containing the name and data count of the specified suppression list.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/supplist'
    patch:
      tags:
        - supplists
      summary: Update a suppression list
      description: Updates a suppression list with the properties in the submitted JSON object. At present the only property which can be set is the list name. List data is added via the /supplists/{id}/add method.
      parameters:
        - in: body
          name: body
          description: Suppression list object. This does not contain the list data itself.
          required: true
          schema:
            $ref: '#/definitions/supplist_postpatch'
        - in: path
          name: id
          description: Suppression List ID
          required: true
          type: string
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
    delete:
      tags:
        - supplists
      summary: Delete a suppression list
      description: Deletes a suppression list and all its data.
      parameters:
        - in: path
          name: id
          description: Suppression List ID
          required: true
          type: string
      responses:
        '200':
          description: Success
        '403':
          description: Forbidden/not found
  '/supplists/{id}/add':
    post:
      tags:
        - supplists
      summary: Add data to a suppression list
      description: Adds the submitted plain text, line-delimited data to the suppression list. Each data item in a list is either an email address or
       an MD5 signature. Lines which do not match either of these two patterns is ignored.
      parameters:
        - in: path
          name: id
          description: Suppression List ID
          required: true
          type: string
        - in: body
          name: body
          description: >-
            Suppression list data with one item to suppress on each line. Items can
            either be email addresses or MD5 signatures. The maximum data size is
            25MB. To add more data than this to a list, call this method multiple times.
          required: true
          schema:
            type: string
            example: >-
              bad@domain.com

              bad2@domain.com
            
      consumes:
        - text/plain
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '403':
          description: Forbidden/not found
  /exclusion:
    get:
      tags:
        - exclusion
      summary: Retrieve all exclusion lists
      parameters: []
      description: Returns the system exclusion lists as an array of JSON objects. There are three built-in exclusion lists, two for storing emails ("Do Not Email" and "Malicious") and one for domains ("Domains"). Any users or domains in an exclusion list cannot be mailed from or stored in the system.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: array
            items:
              type: object
              properties:
                id:
                  type: string
                  example: e
                name:
                  enum: ['emails', 'domains']
                  example: emails
                type:
                  type: string
                  example: Do Not Email
                count:
                  type: integer
                  example: 30
  '/exclusion/{id}/add':
    post:
      tags:
        - exclusion
      summary: Add data to an exclusion list
      description: Accepts JSON containing data to add to an exclusion list. Exclusion lists can hold either emails or domains, depending on their type.
      produces:
        - application/json
      consumes:
        - application/json
      parameters:
        - in: body
          name: body
          description: Data to add to the exclusion list. This is a JSON object with the data items (either e-mails or domains) embedded in an array.
          required: true
          schema:
            type: object
            properties:
              data:
                type: array
                items:
                  type: string
                  example: 'bad@domain.com'
        - in: path
          name: id
          description: Exclusion List ID
          required: true
          type: string
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
  /userroutes:
    get:
      tags:
        - broadcasts
      summary: Retrieve the currently available postal routes.
      description: Some users have access to more than one route for sending messages. This method returns an array of JSON objects which list the IDs and names of all available routes, so that one can be selected when sending a test or broadcast.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: array
            items:
              type: object
              properties:
                id:
                  type: string
                name:
                  type: string
                  example: "Route Name"
  /imageupload:
    post:
      tags:
        - broadcasts
      summary: Upload an image
      description: Accepts a filename and image data via the standard multipart/form-data mechanism. Returns a JSON object containing a link to the hosted file.
      parameters:
        - in: formData
          name: file
          type: file
          description: The image file to upload.
          required: true
      consumes:
        - multipart/form-data
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: object
            properties:
              link:
                type: string
                example: https://domain.com/image.jpg
  /broadcasts:
    post:
      tags:
        - broadcasts
      summary: Create a new broadcast
      description: >-
        Creates a broadcast based on properties contained in a JSON object.

        A description of each property of the broadcast follows:

        * **name**: the broadcast name

        * **when**: if sending the broadcast manually, set to "draft". If sending on a schedule, set to "schedule"

        * **scheduled_for**: if "when" is set to "schedule", then this should be set to the date and time to send the broadcast (RFC 3339 format), otherwise set to null

        * **route**: the route ID to send mail through. Routes can be listed with the /userroutes method. Not all users will have multiple routes available; if only one route is available, this parameter is optional.

        * **tags**: a list of tags to send the broadcast to. At least one of tags, lists, or segments must be a non-empty list.

        * **lists**: a list of contact list IDs (not names) to send the broadcast to.

        * **segments**: a list of segment IDs (not names) to send the broadcast to.

        * **supplists**: a list of suppression list IDs (not names) to suppress the broadcast against (any users in these lists will not be mailed).

        * **suppsegs**: a list of segment IDs (not names) to suppress the broadcast against (any users in these segments will not be mailed).

        * **supptags**: a list of tags to suppress the broadcast against (any users with these tags will not be mailed).

        * **subject**: the email subject

        * **fromname**: the friendly from name

        * **returnpath**: the return path email address

        * **fromemail**: the from email address

        * **replyto**: the reply-to email address

        * **rawText**: the HTML body of the email

        * **openaddtags**: a list of tags to add to users who open this broadcast (optional)

        * **openremtags**: a list of tags to remove from users who open this broadcast (optional)

        * **clickaddtags**: a list of tags to add to users who click this broadcast (optional)

        * **clickremtags**: a list of tags to remove from users who click this broadcast (optional)

        * **sendaddtags**: a list of tags to add to users who are sent this broadcast (optional)

        * **sendremtags**: a list of tags to remove from users who are sent this broadcast (optional)

        * **disableopens**: flag to disable open tracking for this broadcast (default = false)
      consumes:
        - application/json
      produces:
        - application/json
      parameters:
        - in: body
          name: body
          description: Broadcast object
          required: true
          schema:
            $ref: '#/definitions/broadcast_postpatch'
      responses:
        '201':
          description: Success
          schema:
            $ref: '#/definitions/broadcast'
        '400':
          description: Invalid input document
        '401':
          description: Unauthorized
    get:
      tags:
        - broadcasts
      summary: Retrieve broadcasts
      parameters:
        - in: query
          name: older
          type: string
          description: Optional; return sent broadcasts older than the specified date (RFC3339 format)
        - in: query
          name: search
          type: string
          description: Optional; return sent broadcasts matching the search string
      description: >-
       Returns broadcasts as an array of JSON objects, and a count of the total number of sent broadcasts for the given parameters.

       This method only returns the most recent sent broadcasts by default. To return more sent broadcasts, use the "older" query parameter to retrieve broadcasts older than a certain date, or use the "search" parameter to search for broadcasts by name, subject or from name.


       Sent broadcasts can be distinguished by the presence of the "sent_at" property. All broadcasts which have not been sent ("drafts") are always returned by this method.
              
       Broadcast objects are returned without HTML data (rawText). To retrieve HTML, call GET on the particular /broadcasts/{id} resource.

       Each broadcast can have additional reporting properties added after they are sent:

        * **count**: the total number of users intended to be mailed by this broadcast

        * **send**: the number of successful deliveries for this broadcast

        * **hard**: the number of hard bounces for this broadcast

        * **soft**: the number of soft bounces for this broadcast

        * **opened**: the number of unique openers for this broadcast

        * **clicked**: the number of unique clickers for this broadcast

        * **opened_all**: the total number of message opens, including duplicates

        * **clicked_all**: the total number of link clicks, including duplicates

        * **linkclicks**: an array of integers showing the total number of times users clicked each of the links of this broadcast, in order (including duplicate clicks)

        * **unsubscribed**: the number of users who unsubscribed from this broadcast

        * **complained**: the number of users who complained (FBL) from this broadcast

        * **bounced**: the number of users who hard bounced from this broadcast
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/broadcast_all'
  '/broadcasts/{id}':
    get:
      tags:
        - broadcasts
      summary: Retrieve a broadcast
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      description: >-
        Returns the specified broadcast as a JSON object.

        Each broadcast can have additional reporting properties added after they are sent:

        * **count**: the total number of users intended to be mailed by this broadcast

        * **send**: the number of successful deliveries for this broadcast

        * **hard**: the number of hard bounces for this broadcast

        * **soft**: the number of soft bounces for this broadcast

        * **opened**: the number of unique openers for this broadcast

        * **clicked**: the number of unique clickers for this broadcast

        * **opened_all**: the total number of message opens, including duplicates

        * **clicked_all**: the total number of link clicks, including duplicates

        * **linkclicks**: an array of integers showing the total number of times users clicked each of the links of this broadcast, in order (including duplicate clicks)

        * **unsubscribed**: the number of users who unsubscribed from this broadcast

        * **complained**: the number of users who complained (FBL) from this broadcast

        * **bounced**: the number of users who hard bounced from this broadcast
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/broadcast'
    patch:
      tags:
        - broadcasts
      summary: Update a draft broadcast.
      description: >-
        Updates a broadcast from the properties of a JSON object.
        
        Use this method on draft broadcasts only. Broadcasts which have already been started must be updated using the /broadcasts/{id}/update method.

        Not all properties need be specified in a single call; any missing properties will keep their current value in the system.

        A description of each property of the broadcast follows:

        * **name**: the broadcast name

        * **when**: if sending the broadcast manually, set to "draft". If sending on a schedule, set to "schedule"

        * **scheduled_for**: if "when" is set to "schedule", then this should be set to the date and time to send the broadcast (RFC 3339 format), otherwise set to null

        * **route**: the route ID to send mail through. Routes can be listed with the /userroutes method. Not all users will have multiple routes available; if only one route is available, this parameter is optional.

        * **tags**: a list of tags to send the broadcast to. At least one of tags, lists, or segments must be a non-empty list.

        * **lists**: a list of contact list IDs (not names) to send the broadcast to.

        * **segments**: a list of segment IDs (not names) to send the broadcast to.

        * **supplists**: a list of suppression list IDs (not names) to suppress the broadcast against (any users in these lists will not be mailed).

        * **suppsegs**: a list of segment IDs (not names) to suppress the broadcast against (any users in these segments will not be mailed).

        * **supptags**: a list of tags to suppress the broadcast against (any users with these tags will not be mailed).

        * **subject**: the email subject

        * **fromname**: the friendly from name

        * **returnpath**: the return path email address

        * **fromemail**: the from email address

        * **replyto**: the reply-to email address

        * **rawText**: the HTML body of the email

        * **openaddtags**: a list of tags to add to users who open this broadcast (optional)

        * **openremtags**: a list of tags to remove from users who open this broadcast (optional)

        * **clickaddtags**: a list of tags to add to users who click this broadcast (optional)

        * **clickremtags**: a list of tags to remove from users who click this broadcast (optional)

        * **sendaddtags**: a list of tags to add to users who are sent this broadcast (optional)

        * **sendremtags**: a list of tags to remove from users who are sent this broadcast (optional)

        * **disableopens**: flag to disable open tracking for this broadcast (default = false)
      parameters:
        - in: body
          name: body
          description: Broadcast object.
          required: true
          schema:
            $ref: '#/definitions/broadcast_postpatch'
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
    delete:
      tags:
        - broadcasts
      summary: Delete a broadcast
      description: Deletes a draft or scheduled broadcast or hides a sent broadcast from the UI.
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      responses:
        '200':
          description: Success
        '400':
          description: Broadcast cannot be deleted because it is being sent
        '403':
          description: Forbidden/not found
  '/broadcasts/{id}/start':
    post:
      tags:
        - broadcasts
      summary: Send a broadcast immediately
      description: This method starts a draft broadcast, sending mail and setting its state to sent.
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '403':
          description: Forbidden/not found
  '/broadcasts/{id}/test':
    post:
      tags:
        - broadcasts
      summary: Send a test email
      description: Sends a test email for the specified broadcast, using the parameter specification provided as a JSON object. Set the "to" property to the email address to send to. The optional **route** property selects a particular postal route to send through, if more than one is available. Available postal routes can be listed with the /userroutes method.
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
        - in: body
          name: body
          description: An object describing the parameters for the test
          required: true
          schema:
            type: object
            properties:
              to:
                type: string
                example: recipient@domain.com
              route:
                type: string
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
  '/broadcasts/{id}/cancel':
    post:
      tags:
        - broadcasts
      summary: Cancels a broadcast
      description: This method attempts to remove all unsent mail from system queues.
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Broadcast has not been sent or is invalid
        '403':
          description: Forbidden/not found
  '/broadcasts/{id}/duplicate':
    post:
      tags:
        - broadcasts
      summary: Creates a duplicate of a sent or unsent broadcast
      description: Creates a new draft broadcast with the same properties/content as the broadcast with the specified ID.
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/broadcast'
        '400':
          description: Broadcast has not been sent or is invalid
        '403':
          description: Forbidden/not found
  '/broadcasts/{id}/update':
    post:
      tags:
        - broadcasts
      summary: Update a sent broadcast.
      description: >-
        Updates the properties of a running or finished broadcast. Use this method on sent broadcasts only. Broadcasts which have not been started must be updated by calling PATCH on the /broadcasts/{id} resource. Calling this method will initiate a process of attempting to update any unsent mail with the new broadcast properties. For finished broadcasts, this method can be used to e.g. change the tags applied to users to respond to the broadcast.

        Not all properties need be specified in a single call; any missing properties will keep their current value in the system.

        A description of each property which can be set follows:

        * **name**: the broadcast name

        * **subject**: the email subject

        * **fromname**: the friendly from name

        * **returnpath**: the return path email address

        * **fromemail**: the from email address

        * **replyto**: the reply-to email address

        * **rawText**: the HTML body of the email

        * **openaddtags**: a list of tags to add to users who open this broadcast (optional)

        * **openremtags**: a list of tags to remove from users who open this broadcast (optional)

        * **clickaddtags**: a list of tags to add to users who click this broadcast (optional)

        * **clickremtags**: a list of tags to remove from users who click this broadcast (optional)

        * **sendaddtags**: a list of tags to add to users who are sent this broadcast (optional)

        * **sendremtags**: a list of tags to remove from users who are sent this broadcast (optional)

        * **disableopens**: flag to disable open tracking for this broadcast (default = false)
      parameters:
        - in: body
          name: body
          description: Broadcast object. See the description on /broadcasts (POST) for details.
          required: true
          schema:
            $ref: '#/definitions/broadcast_postpatch'
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
  '/broadcasts/{id}/export':
    post:
      tags:
        - broadcasts
      summary: Export broadcast data
      description: >-
        Creates an export object that points to a file URL which contains information about this broadcast
        (openers, clickers, etc.). Note that the file will not exist yet when this method is called;
        to determine when the export has completed, use the returned export ID and poll it using
        the /exports resource.
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      consumes: []
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: object
            properties:
              id:
                type: string
        '403':
          description: Forbidden/not found
  '/broadcasts/{id}/domainstats':
    get:
      tags:
        - broadcasts
      summary: Get detailed reporting on each domain mailed by a broadcast
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      description: >-
        Returns an array of JSON objects, each one representing data for a particular domain.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: array
            items:
              type: object
              properties:
                domain:
                  type: string
                  example: domain.com
                count:
                  type: integer
                  example: 2050
                send:
                  type: integer
                  example: 2000
                soft:
                  type: integer
                  example: 20
                hard:
                  type: integer
                  example: 30
                open:
                  type: integer
                  example: 100
                click:
                  type: integer
                  example: 10
                complaint:
                  type: integer
                  example: 0
                unsub:
                  type: integer
                  example: 1
  '/broadcasts/{id}/clientstats':
    get:
      tags:
        - broadcasts
      summary: Get the top devices, browsers and locations for a broadcasts
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
      description: >-
        Returns a JSON object with three arrays in different properties. The "devices" property holds a count of responders by device. The "browsers" property holds a count of responders by browser/OS pair. The "locations" property holds a count of responders by country and state/region.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: object
            properties:
              devices:
                type: array
                items:
                  type: object
                  properties:
                    device:
                      type: string
                      example: Tablet
                    count:
                      type: integer
                      example: 500
              browsers:
                type: array
                items:
                  type: object
                  properties:
                    os:
                      type: string
                      example: iOS
                    browser:
                      type: string
                      example: Safari
                    count:
                      type: integer
                      example: 500
              locations:
                type: array
                items:
                  type: object
                  properties:
                    country:
                      type: string
                      example: United States
                    country_code:
                      type: string
                      example: US
                    region:
                      type: string
                      example: Maine
                    count:
                      type: integer
                      example: 500
  '/broadcasts/{id}/msgs':
    get:
      tags:
        - broadcasts
      summary: Get a list of bounce messages for a broadcast
      parameters:
        - in: path
          name: id
          description: Broadcast ID
          required: true
          type: string
        - in: query
          name: domain
          required: true
          type: string
          description: The domain name to retrieve messages about
        - in: query
          name: type
          required: true
          type: string
          description: The type of message to retrieve, must be "soft" or "hard".
      description: Returns bounce messages for a domain as an array of JSON objects.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: array
            items:
              type: object
              properties:
                msg:
                  type: string
                  example: "550 user not found"
                count:
                  type: integer
                  example: 20
  /exports:
    get:
      tags:
        - exports
      summary: Retrieve all exported files
      parameters: []
      description: Returns an array of JSON objects containing the exported files currently available (exports are automatically deleted in 24 hours). Each object contains an ID linking it to the initial export call and a URL where the file can be retrieved. However, the URL will not be valid until the "complete" property of the export object is set to true. The complete property may not be present until it is set.
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            type: array
            items:
              type: object
              properties:
                id:
                  type: string
                complete:
                  type: boolean
                  example: true
                url:
                  type: string
                  example: 'http://domain.com/download.zip'
  /transactional/send:
    post:
      tags:
        - transactional
      summary: Send a transactional message
      description: >-
        To send a transactional message, POST to the above URL using the parameter specification provided below as a JSON object.

        Any email address which matches a contact in an exclusion list, or who previously unsubscribed, complained or bounced in the system, will have transactional messages to it suppressed.

        Each transactional message can be assigned a tag which groups it for reporting purposes; for example, a message could be tagged as "receipts", "passwordresets", etc. Transactional message tags are distinct from contact tags and are case-insensitive. Message tags can only contain letters, numbers, and the characters "_", "-", and ".", and can be a maximum of 18 characters in length. There is a default limit of 400 distinct message tags for each user.

        If specified, the **variables** property enables the use of the Jinja2 templating system with the specified variable dictionary as input. For more information on the syntax of Jinja2 templates, see http://jinja.pocoo.org/docs/2.10/templates/. The values of the **variables** property dictionary can themselves be any combination of embedded objects, arrays or values.

        The use of Jinja syntax is disabled if the **variables** property is null or not specified. If you wish to still use Jinja2 templates without specifying any values, pass an empty object ({}) for this property.
        
        Full Jinja syntax is limited to WYSIWYG and raw HTML templates, as well as message bodies specified in the API call; templates created with the drag and drop editor are limited to simple variable replacement only.

        The **replyto** property is optional; if unset, the value of the **fromemail** property is used.

        The **tag** property is optional; if unset, the message will be placed in the "untagged" category.

        The optional **toname** property can be used to set a "name" part of the recipient address (i.e. Name <addr@domain>).
        
        The optional **route** property selects a particular postal route to send through, if more than one is available. Available postal routes can be listed with the /userroutes method.

        The optional **template** property specifies a template ID to use for the message parameters. If a template ID is used, the **body**, **subject**, **fromname**, **fromemail**, **replyto** and **tag** properties will be taken from the specified template, and any values passed in for these properties directly to the method will be ignored.

      parameters:
        - in: body
          name: body
          description: An object describing the parameters for the email
          required: true
          schema:
            $ref: '#/definitions/txn_send'
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
  '/webhooks':
    post:
      tags:
        - webhooks
      summary: Create a new webhook
      description: >-
              Creates a new webhook with the properties in the submitted JSON.

              The **target_url** property is the URL to send events to. The **event** property should be one of the following values:

              * **unsub**: This webhook will be triggered when a contact unsubscribes.

              * **complaint**: This webhook will be triggered when a contact marks an email as spam.

              * **bounce**: This webhook will be triggered when a contact hard bounces.

              * **open**: This webhook will be triggered when a contact opens an email.

              * **click**: This webhook will be triggered when a contact clicks an email.

              * **open_click**: This webhook will be triggered when a contact opens or clicks an email.

              * **unsub_complaint**: This webhook will be triggered when a contact unsubscribes or marks an email as spam.


              See the 'Test Webhook' dialog in the platform user interface for example data for each event type.
      parameters:
        - in: body
          name: body
          description: >-
              An object describing the webhook
          required: true
          schema:
            $ref: '#/definitions/webhook_postpatch'
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '201':
          description: Success
          schema:
            $ref: '#/definitions/webhook'
        '400':
          description: Invalid input document
        '409':
          description: Webhook already exists
    get:
      tags:
        - webhooks
      summary: Retrieve the current list of webhooks
      description: |
             Returns a JSON array which contains the currenty configured list of webhooks
      produces:
        - application/json
      responses:
        '200':
          description: Success
          schema:
            $ref: '#/definitions/webhooks_all'
  '/webhooks/{id}':
    patch:
      tags:
        - webhooks
      summary: Update a webhook
      description: >-
            Updates a webhook with the properties in the submitted JSON.

            The **target_url** property is the URL to send events to. The **event** property should be one of the following values:

            * **unsub**: This webhook will be triggered when a contact unsubscribes.

            * **complaint**: This webhook will be triggered when a contact marks an email as spam.

            * **bounce**: This webhook will be triggered when a contact hard bounces.

            * **open**: This webhook will be triggered when a contact opens an email.

            * **click**: This webhook will be triggered when a contact clicks an email.

            * **open_click**: This webhook will be triggered when a contact opens or clicks an email.

            * **unsub_complaint**: This webhook will be triggered when a contact unsubscribes or marks an email as spam.


            See the 'Test Webhook' dialog in the platform user interface for example data for each event type.
      parameters:
        - in: path
          name: id
          description: Webhook ID
          required: true
          type: string
        - in: body
          name: body
          description: >-
             The properties of the webhook to update.
          required: true
          schema:
            $ref: '#/definitions/webhook_postpatch'
      consumes:
        - application/json
      produces:
        - application/json
      responses:
        '200':
          description: Success
        '400':
          description: Invalid input document
        '403':
          description: Forbidden/not found
        '409':
          description: Webhook already exists
    delete:
      tags:
        - webhooks
      summary: Delete a webhook
      parameters:
        - in: path
          name: id
          description: Webhook ID
          required: true
          type: string
      responses:
        '200':
          description: Success
        '403':
          description: Forbidden/not found
definitions:
  webhooks_all:
    type: array
    items:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
          example: My Webhook
        target_url:
          type: string
          example: https://domain.com/path
        event:
          type: string
          example: click
  webhook_postpatch:
    type: object
    properties:
      name:
        type: string
        example: My Webhook
      target_url:
        type: string
        example: https://domain.com/path
      event:
        type: string
        example: click
  webhook:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
        example: My Webhook
      target_url:
        type: string
        example: https://domain.com/path
      event:
        type: string
        example: click
  txn_send:
    type: object
    properties:
     fromname:
       type: string
       example: Bob Sender
     fromemail:
       type: string
       example: bob@sender.com
     to:
       type: string
       example: recipient@domain.com
     toname:
       type: string
       example: Joe User
     body:
       type: string
       example: <html><body>Hello!</body></html>
     subject:
       type: string
       example: My Subject
     replyto:
       type: string
       example: replyto@sender.com
     returnpath:
       type: string
       example: returnpath@sender.com
     tag:
       type: string
       example: newusers
     variables:
       type: object
       example:
         var1: value1
         var2: value2
     route:
       type: string
     template:
       type: string
  broadcast_all:
    type: object
    properties:
      broadcasts:
        type: array
        items:
          $ref: '#/definitions/broadcast_nohtml'
      count:
        type: integer
        example: 1
  broadcast_postpatch:
    type: object
    properties:
      name:
        type: string
        example: My Broadcast
      when:
        enum:
          - draft
          - schedule
      scheduled_for:
        type: string
        format: date-time
      tags:
        type: array
        items:
          type: string
          example: tagname
      replyto:
        type: string
        example: "from@domain.com"
      subject:
        type: string
        example: "My Email Subject"
      fromname:
        type: string
        example: "Friendly Name"
      returnpath:
        type: string
        example: "from@domain.com"
      fromemail:
        type: string
        example: "from@domain.com"
      disableopens:
        type: boolean
      lists:
        type: array
        items:
          type: string
      segments:
        type: array
        items:
          type: string
      supplists:
        type: array
        items:
          type: string
      suppsegs:
        type: array
        items:
          type: string
      supptags:
        type: array
        items:
          type: string
          example: "tagname"
      rawText:
        type: string
        example: "<html><body>Email Text</body></html>"
      openaddtags:
        type: array
        items:
          type: string
          example: "tagname"
      openremtags:
        type: array
        items:
          type: string
          example: "tagname"
      sendaddtags:
        type: array
        items:
          type: string
          example: "tagname"
      sendremtags:
        type: array
        items:
          type: string
          example: "tagname"
      clickaddtags:
        type: array
        items:
          type: string
          example: "tagname"
      clickremtags:
        type: array
        items:
          type: string
          example: "tagname"
  broadcast:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
        example: My Broadcast
      when:
        enum:
          - draft
          - schedule
      scheduled_for:
        type: string
        format: date-time
      tags:
        type: array
        items:
          type: string
          example: tagname
      replyto:
        type: string
        example: "from@domain.com"
      subject:
        type: string
        example: "My Email Subject"
      fromname:
        type: string
        example: "Friendly Name"
      returnpath:
        type: string
        example: "from@domain.com"
      fromemail:
        type: string
        example: "from@domain.com"
      disableopens:
        type: boolean
      lists:
        type: array
        items:
          type: string
      segments:
        type: array
        items:
          type: string
      supplists:
        type: array
        items:
          type: string
      suppsegs:
        type: array
        items:
          type: string
      supptags:
        type: array
        items:
          type: string
          example: "tagname"
      rawText:
        type: string
        example: "<html><body>Email Text</body></html>"
      openaddtags:
        type: array
        items:
          type: string
          example: "tagname"
      openremtags:
        type: array
        items:
          type: string
          example: "tagname"
      sendaddtags:
        type: array
        items:
          type: string
          example: "tagname"
      sendremtags:
        type: array
        items:
          type: string
          example: "tagname"
      clickaddtags:
        type: array
        items:
          type: string
          example: "tagname"
      clickremtags:
        type: array
        items:
          type: string
          example: "tagname"
      count:
        type: integer
      hard:
        type: integer
      send:
        type: integer
      soft:
        type: integer
      delivered:
        type: integer
      opened:
        type: integer
      clicked:
        type: integer
      opened_all:
        type: integer
      clicked_all:
        type: integer
      linkclicks:
        type: array
        items:
          type:
            integer
      unsubscribed:
        type: integer
      complained:
        type: integer
      bounced:
        type: integer
      sent_at:
        type: string
        format: date-time
  broadcast_nohtml:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
        example: My Broadcast
      when:
        enum:
          - draft
          - schedule
      scheduled_for:
        type: string
        format: date-time
      tags:
        type: array
        items:
          type: string
          example: tagname
      replyto:
        type: string
        example: "from@domain.com"
      subject:
        type: string
        example: "My Email Subject"
      fromname:
        type: string
        example: "Friendly Name"
      returnpath:
        type: string
        example: "from@domain.com"
      fromemail:
        type: string
        example: "from@domain.com"
      disableopens:
        type: boolean
      lists:
        type: array
        items:
          type: string
      segments:
        type: array
        items:
          type: string
      supplists:
        type: array
        items:
          type: string
      suppsegs:
        type: array
        items:
          type: string
      supptags:
        type: array
        items:
          type: string
          example: "tagname"
      openaddtags:
        type: array
        items:
          type: string
          example: "tagname"
      openremtags:
        type: array
        items:
          type: string
          example: "tagname"
      sendaddtags:
        type: array
        items:
          type: string
          example: "tagname"
      sendremtags:
        type: array
        items:
          type: string
          example: "tagname"
      clickaddtags:
        type: array
        items:
          type: string
          example: "tagname"
      clickremtags:
        type: array
        items:
          type: string
          example: "tagname"
      count:
        type: integer
      hard:
        type: integer
      send:
        type: integer
      soft:
        type: integer
      delivered:
        type: integer
      opened:
        type: integer
      clicked:
        type: integer
      opened_all:
        type: integer
      clicked_all:
        type: integer
      linkclicks:
        type: array
        items:
          type:
            integer
      unsubscribed:
        type: integer
      complained:
        type: integer
      bounced:
        type: integer
      sent_at:
        type: string
        format: date-time
  list_postpatch:
    type: object
    properties:
      name:
        type: string
        maxLength: 1024
        example: "My Contact List"
  list_all:
    type: array
    items:
      type: object
      properties:
        id:
          type: string
        name:
          type: string
          example: "My Contact List"
        count:
          type: integer
          example: 4000
        active30:
          type: integer
          example: 700
        active60:
          type: integer
          example: 800
        active90:
          type: integer
          example: 800
        bounced:
          type: integer
          example: 200
        complained:
          type: integer
          example: 100
        unsubscribed:
          type: integer
          example: 100
        soft_bounced:
          type: integer
          example: 100
        domaincount:
          type: integer
          example: 5
  list:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
        example: "My Contact List"
      count:
        type: integer
        example: 4000
      active30:
        type: integer
        example: 700
      active60:
        type: integer
        example: 800
      active90:
        type: integer
        example: 800
      bounced:
        type: integer
        example: 200
      complained:
        type: integer
        example: 100
      unsubscribed:
        type: integer
        example: 100
      soft_bounced:
        type: integer
        example: 100
      domaincount:
        type: integer
        example: 5
  contactdata:
    type: object
    properties:
      email:
        type: string
        example: "contact@test.domain"
      properties:
        type: object
        properties:
          'Custom Field':
            type: string
            example: "Custom Value"
      tags:
        type: array
        items:
          type: string
          example: "tagname"
      added_at:
        type: string
        format: date-time
        example: "2018-01-01T00:00:00Z"
      lists:
        type: array
        items:
          type: string
          example: "listid"
      devices:
        type: array
        items:
          type: string
          example: "PC"
      browsers:
        type: array
        items:
          type: string
          example: "Chrome"
      operating_systems:
        type: array
        items:
          type: string
          example: "Windows"
      countries:
        type: array
        items:
          type: string
          example: "United States"
      regions:
        type: array
        items:
          type: string
          example: "Maine"
      zipcodes:
        type: array
        items:
          type: string
          example: "12345"
      open_logs:
        type: array
        items:
          type: object
          properties:
            timestamp:
              type: string
              format: date-time
              example: "2018-01-01T00:00:00Z"
            broadcast_id:
              type: string
              example: "broadcast_or_msgid"
      click_logs:
        type: array
        items:
          type: object
          properties:
            timestamp:
              type: string
              format: date-time
              example: "2018-01-01T00:00:00Z"
            broadcast_id:
              type: string
              example: "broadcast_or_msgid"
            link_index:
              type: integer
              example: 0
      send_logs:
        type: array
        items:
          type: object
          properties:
            broadcast_id:
              type: string
              example: "broadcast_or_msgid"
  alltags:
    type: array
    items:
      type: object
      properties:
        tag:
          type: string
          example: "tagname"
        count:
          type: integer
          example: 100
        added:
          type: string
          format: date-time
          example: "2018-01-01T00:00:00Z"
  supplist_postpatch:
    type: object
    properties:
      name:
        type: string
        maxLength: 1024
        example: "My Suppression List"
  supplist_all:
    type: array
    items:
      $ref: '#/definitions/supplist'
  supplist:
    type: object
    properties:
      id:
        type: string
      name:
        type: string
        example: "My Suppression List"
      count:
        type: integer
        example: 200
